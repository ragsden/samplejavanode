language: java
jdk:
   - openjdk7

node_js:
  - "0.10"

install:
  - https://www.digitalocean.com/community/articles/how-to-install-node-js-with-nvm-node-version-manager-on-a-vps
  - nvm install 0.10
  - npm install grunt-cli bower
  - npm install
  - node_modules/bower/bin/bower install

before_script:
 - mkdir -p shippable/codecoverage shippable/testresults

script: 
  - cd j2ee/build
  - ant coverage
  - node_modules/grunt-cli/bin/grunt test
  - node_modules/grunt-cli/bin/grunt build
  - mv test-results.xml ../shippable/testresults
  - mv coverage/cobertura/*/coverage.xml ../shippable/codecoverage
  - node_modules/grunt-cli/bin/grunt test:browsers

notifications:
  email: false
